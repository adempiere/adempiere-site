---
title: How to create a complete new module in ADempiere
category: Community
star: 9
sticky: 9
tag:
  - Wiki
  - Developer's Guide
article: false
---

::: info Note:

DISCLAIMER - This is an implementation guide written by [Kittiu](https://wiki.adempiere.net/User:Kittiu), from [ecosoft](http://www.ecosoft.co.th/) Bangkok. Other contributors are welcome to discuss on improving it.

:::

## Overview

ADempiere is a great Business Application. What make ADempeire different from others are not only its complete business features, but indeed its ability to extend its features. ADempeire [Application Dictionary Framework](application-dictionary.md) is very flexible and powerful. ADempiere is great about openness. All the technique has been document and discussed openly in this Wiki. The only thing developer need to do is to find and get familiar with all the concept, and try to connect all the jigsaw together. Which is in a way, quite difficult.

In this tutorial, we will be using a real usable yet simple module that I developed from a requirement of ADempiere ERP Project in Thailand. I will walk you through techniques needed to build a new module. And along the way, I will be referring to the more completed source of documentation. As such, it is highly recommended that the reader dig into each of the technique and try to understand them along with the tutorial.

I hope this tutorial will get you started...faster!

--[Kittiu](https://wiki.adempiere.net/User:Kittiu) 14:01, 7 August 2011 (UTC), [ecosoft](http://www.ecosoft.co.th/)

## Business Requirement for this tutorial

We will call this new module - Billing. In some countries, at least for Thailand, there is a customary practice for companies to collect money from their customers only once in a month. For example, the customer has 3 payments due in a given month, the vendor or billing company should group all the due AR Invoices in a document call Billing Document and issue it with all the invoices consolidated to the customer on the Billing Day. The customer will be paying based on the payable amount shown in Billing Document in the following month.

## What is in this tutorial?

Techniques used in the tutorial includes,

- New Window & Table - Billing / Billing Line [1]
  - Billing Window is the main UI for the new functionality
  - Billing Tab will be used as document header for the group of Invoice. User will specify the Business Partner and the Billed Date
  - Billing Line Tab will be used to list all the due invoices, which are either generated by the criteria in Billing Tab or manually add in
- New Document Type - Billing [[2]](http://www.adempiere.com/How_to_create_a_new_document_with_specific_accounting)
- Couple of Validation Rules will be configured to make proper screening of data [[3]](http://www.adempiere.com/Validation_Rule#Validation_Rules)
- Java Callouts used by field in Billing Tab [[4]](http://www.adempiere.com/Callout)
- Java Process - Create Billing Lines from matched criteria in Billing tab [[5]](http://www.adempiere.com/Process)
- Jasper Report to create a new Billing Form which can be printed right from the Billing Tab [[6]](http://www.adempiere.com/index.php/Using_Jasper_Report_Form_in_place_of_Standard_Forms)
- Model Validator Technique that will intercept some processes into Payment Document's existing process [[7]](http://www.adempiere.com/ModelValidator)
- For training purposes, download the source code (Billing_src.zip), PackIn package (Billing.zip), and a sample Jasper form (Billing_Form.jrxml) from [DOWNLOAD HERE](https://bitbucket.org/kittiu/billing/downloads) (as ADempiere Wiki now does not accept zip files, so I have to host them on Bitbucket).

## Sample Test Steps

Following are the use case of this new module. We will be testing them along with development steps.

A customer has made 3 orders during the month. Sales orders are completed, and the goods has been shipped. Now it is the process of invoicing.

- User prepares 3 Invoices (Customer) issued to that customer. Let's give these invoices a due date at the end of the working month.
- It is the normal practice (at least in Thailand) that customers will accept invoices from vendors only once a month. So, before that date, the user creates 1 Billing Document that summarizes the 3 invoices.
- Print out the Billing forms and their associated Invoice forms. These forms will be printed out and issued to the customer.
- Once money is paid by customers, the user uses the Payment window to process the AR Receipt. Allocate the Receipt Line with the help of the Billing Document.
- User completes the AR Receipt, and the information (AR Receipt's DocNo) will be referenced back to the underlying Billing Document.

## Development Steps

Enough introduction, let's get our hands dirty!

### Step 1: Prepare Your Customization Environment

Recommended reading: [Create your ADempiere customization environment](create-your-adempiere-development-environment.md)

In this tutorial, we assume that we only have 1 project "ADempiere360LTS" setup and functional. We will be creating a new Eclipse Project called "BillingModule" as our custom project.

- On your Eclipse, create a new Java Project called "BillingModule"
- Add ADempiere360LTS to this project build path
- Create Run Configuration for this new project
- Run ADempiere from this Run Configuration

### Step 2: Create new Entity Type

This is one noteworthy step before we start any development. The Entity Type determines the ownership of Application Dictionary entries. Normally, entity (i.e., Window, Fields, Rules, etc...) are marked as "Dictionary" which means, ADempiere own entities. It is a good practice to always create a new Entity Type for your project. This will tell you which component belongs to your project.

It could be anything, but in this tutorial we will be using our Entity Type called, ECS_LCO (Ecosoft Thai Localization)

1. Run ADempiere from Eclipse
2. Login as System Administrator
3. Open Entity Type window
4. Click New
  - Entity Type: ECS_LCO
  - Name: Thai Localisation
  - ModelPackage: org.ecosoft.model (<--this will be used as default package later on when we run GenerateModel)
5. Click Save

From now on, when you create any new components, set Entity Type to "ECS_LCO" when ever applicable.

### Step 3: Create Billing Tables and Window

Recommended reading: [NewWindow](a), [How to create a new document with specific accounting](a)

In this step, we will be creating a new Window (Billing) with 2 tabs (Billing and Billing Line). In normal practice, you will be using Application Dictionary to create the window. But for this tutorial purpose, it will be using too much time to create windows and fields one by one. Instead, we will install the pre-built package, Billing.zip downloaded form previous step. The Billing.zip is a 2Pack Package that I have created (PackOut) from my previous implementing of Billing module. [2Pack](https://wiki.adempiere.net/2Pack) is a very useful feature when come to migration and worth experimenting in detail.

Per say, we will use the ready to use Billing.zip to create,

- Billing window with 2 tabs, Billing and Billing Line
- 2 database tables for the UI, C_Billing and C_BillingLine
- Some other required component, i.e., Field Validator, etc.

To install Billing.zip

1. Login as System Administrator
2. Open window "PackIn - Import a package"
3. New
    1. Package Source Type: File
    2. Package Source: (Select the Billing.zip)
    3. Package Directory: migration (<-- PackIn will copy and expand Billing.zip in this directory)
    4. Update system maintained application dictionary: Not checked
4. Save and click to process "PackIn"

::: info Note:

The brief steps if create new window manually are

Login as System Administator
Use Table and Column window to create new table, "C_Billing" and "C_BillingLine"
Create Columns for both tables (we can also copy from existing table)
Click "Synchronize column" button to create underlining tables in Database
Use Window, Column and Field window to create a new window, "Billing" and 2 tabs, "Billing", "Billing Line"
Assign C_Billing table to Billing Tab and C_BillingLine to Billing Line Tab
Click "Create Fields" button to create fields from columns
Rearrange fields position and behavior (i.e., mandatory, readonly, etc...)

:::

- Once the Tables and Windows are created (from PackIn), please review and see how they are configured. Open the "Window, Tab and Field" window and the "Table and Column" window and look for new Windows/Tables. Some notes on Columns/Fields here:

Fields required on all Windows/Tables in ADempiere:
  - AD_Client_ID, AD_Org_ID --> Identify data owner
  - C_Billing_ID --> Table ID
  - Created, CreatedBy, Updated, UpdatedBy --> Updated automatically by PO object
  - IsActive --> Good practice as active/inactive record

Fields required as we want this Billing window to be a "Document Type" window:
  - C_DocType_ID, DocumentNo, DocAction, DocStatus, Processed --> Document control fields

![billing](/assets/img/community/developers-guide/Billing.jpg)

![billingline](/assets/img/community/developers-guide/Billingline.jpg)

Explore the new window!

1. Login as GardenAdmin, open the Billing window (located under menu Quote-to-Invoice --> Sales Invoices). Then, explore Billing and Billing Line tabs.
2. You will notice from the window layout,
  - Billing is the main tab, Billing Line is the sub tab.
  - Some fields are mandatory.
  - Some callouts are being called, but not yet implemented.
  - Buttons are in place, but no process is attached, i.e., Generate Billing Line, Button to change DocAction.
  - Etc... (the best way to understand is to open the Application Dictionary of this window alongside).
3. Login as System, open the window, Window, Tab & Field and search for Billing.
- Billing tab is the main tab --> Tab Level = 0
- Billing Line tab is the sub tab --> Tab Level = 1
- Explore Table and Column for C_Billing:
  - AD_Client_ID --> Default logic = @#AD_Client_ID@, Mandatory
  - C_Billing_ID --> Key Column, Mandatory
  - C_Bpartner_ID --> Reference = Search, Callout = org.ecosoft.model.CalloutBilling.bPartner, Dynamic Validation = C_BPartner (Trx)
- Explore Table for C_BillingLine:
  - C_BillingLine_ID --> Key Column, Mandatory
  - C_Billing_ID --> Parent Link Column
  - Line --> @SQL=SELECT NVL(MAX(Line),0)+10 AS DefaultValue FROM C_InvoiceLine WHERE C_Billing_ID=@C_Billing_ID@
- Etcâ€¦ (these setups come from the Billing.zip, some of them are already functional, some are not, i.e., CallOut java class)

### Step 4: Generate Model Class for Billing and Billing Line model

Recommended reading: [NewWindow#Generate_Model](https://wiki.adempiere.net/NewWindow#Generate_Model)

After previous step, we now have a new Billing window with its associate table. Though CRUD (Create/Read/Update/Delete) functionality is available, it is not yet very useful. Next step is to extend its functionality, we will have to create Model classes for them.

With Model class, we can make the control over the object (aka Window/Table) better. ADempiere provide a GenerateModel process to help generate Interface and PO Extension classes (I_ and X_ classes getter/setter).

- On your Eclipse, create a new Run Configurator, call it Generate Model.
  - Project: ADempiere360LTS.
  - Main class: org.adempiere.util.GenerateModel.

![generate-model](/assets/img/community/developers-guide/Generate_model.jpg)

To generate classes, use the following Arguments:
- D:\temp\Billing --> where output classes will be placed. Ensure this folder is prepared, as ADempiere won't create it automatically.
- org.ecosoft.model --> package
- 'ECS_LCO' --> Entity Type (our new tables have been marked as ECS_LCO)
- 'C_Billing' --> Table to lookup

Run the configuration, and the classes will be created in the D:\temp\Billing folder.

Repeat the same steps to generate model classes for C_BillingLine.

After completing the above steps:
1. Navigate to D:\temp\Billing.
2. You should see 4 java files generated: I_C_Billing.java, X_C_Billing.java, I_C_BillingLine.java, X_C_BillingLine.java.

![generatebillingmodels](/assets/img/community/developers-guide/GenerateBillingModels.jpg)

Note: for the new model classes, you will notice in the file that, its package is org.ecosoft.model. This is because we have specified it in Entity Type

I_ and X_ are interface and get/set classes generated by GenerateModel class, and hence should not be modified. There is no implementation logic in these classes yet. Next we have to create the real model-extension class where the logic reside. As a rule of thumb, the name of Model for C_Billing table will be "MCBilling" (prefix with "M" and takeout "_"). More information about extending model can be found here.

As such, we will be creating 2 new model extension classes.

org.ecosoft.MCBilling.java
org.ecosoft.MCBillingLine.java
Note that, these classes will extend the getter and setter classes (X_ classes) in previous steps. We can add more logic when a billing record is, i.e., saved, deleted, completed, etc. For training purpose we will be using the pre-written class provided in this tutorial.


