"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5817],{62083:(e,i,t)=>{t.r(i),t.d(i,{default:()=>u});var n=t(78e3);const s=(0,n.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>This document applies to branch ADEMPIERE-294 Upgrade to zk 7.02 which will be added as a patch after the release of 3.8.0.\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="developing-themes" tabindex="-1"><a class="header-anchor" href="#developing-themes" aria-hidden="true">#</a> Developing Themes</h2><h3 id="zk-configuration" tabindex="-1"><a class="header-anchor" href="#zk-configuration" aria-hidden="true">#</a> ZK Configuration</h3><p>The following changes have been made to the ZK files to enable custom themes:</p><ul><li>In zkwebui/WEB-INF/zk.xml, a custom theme provider is defined and a number of development settings added. In production environments, these need to be tailored appropriately.</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;desktop-config&gt;\n     &lt;theme-provider-class&gt;org.adempiere.webui.theme.AdempiereThemeProvider&lt;/theme-provider-class&gt;\n &lt;/desktop-config&gt;\n\n &lt;library-property&gt;\n                &lt;name&gt;org.zkoss.zul.nativebar&lt;/name&gt;\n                &lt;value&gt;true&lt;/value&gt;\n &lt;/library-property&gt;\n\n &lt;library-property&gt;\n                &lt;name&gt;org.zkoss.theme.folder.root&lt;/name&gt;\n                &lt;value&gt;theme&lt;/value&gt;\n &lt;/library-property&gt;\n\n &lt;library-property&gt;\n                &lt;name&gt;org.zkoss.theme.preferred&lt;/name&gt;\n                &lt;value&gt;adempiere_default&lt;/value&gt;\n &lt;/library-property&gt;\n \n &lt;library-property&gt;\n                &lt;name&gt;org.zkoss.web.classWebResource.cache&lt;/name&gt;\n                &lt;value&gt;false&lt;/value&gt;\n &lt;/library-property&gt;\n\n &lt;library-property&gt;\n  &lt;name&gt;org.zkoss.zk.WCS.cache&lt;/name&gt;\n  &lt;value&gt;false&lt;/value&gt;\n &lt;/library-property&gt;\n\n &lt;library-property&gt;\n                &lt;name&gt;org.zkoss.web.classWebResource.cache.CSS.hours&lt;/name&gt;\n                &lt;value&gt;-1&lt;/value&gt;\n &lt;/library-property&gt;\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="the-theme-folder-structure" tabindex="-1"><a class="header-anchor" href="#the-theme-folder-structure" aria-hidden="true">#</a> The Theme Folder Structure</h3><p>Themes can be added to the application as folders or jar files. Theme Jar files can be saved in a number of locations but the zkwebui/WEB-INF/lib/theme folder is a good choice. The folder structure is more powerful and allows for greater flexibility in managing the theme. By the library property set in zk.xml, the theme folder is zkwebui/theme. (This is the zk default name so the entry in the zk.xml file is not really needed but is there in case of changes.) Under that folder are theme specific folders which follow a standard structure.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-zkwebui\n   |-theme\n       |-&lt;theme name&gt;\n           |-images\n           |-js\n           |-zkex\n           |-zkmax\n           |-zul\n               |-css\n                   ext.css.dsp\n                   norm.css.dsp\n                   zk.wcs\n               |-html\n               |-img\n               |-less\n                   |-font\n                   _header.less\n                   _reset.less\n                   _zkmixins.less\n                   _zkvariables.less\n                   norm.less\n               login-info.zul\n               ...\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container note"><p class="custom-container-title">Note:</p><p>&quot;zkex&quot; and &quot;zkmax&quot; folders relate to theme elements that are only available with the ZK Premium and Enterprise Edition. They are included in case of upgrades.</p></div><p>The images and *.zul files in the zul directory have been added and are theme specific. The rest of the structure is defined by zk and is part of the language definition &quot;xul/html&quot;. This language defines all the component styles that need to be included in a Widget CSS descriptor (WCS) file - zk.wcs. Edits to the .less files, once compiled to .css.dsp, will be picked up and included in the zk.wcs file.</p><div class="custom-container info"><p class="custom-container-title">Note:</p><p>Adding new components to this structure requires a modification of the language definition. See the ZK documentation for more info.</p></div><p>The most important file in this structure is _zkvariables.less. This file contains theme specific variables such as colors and sizes that enable the full power of the less css preprocessor. For example, the two themes adempiere_default and green_thumb differ only in the settings of this file.</p><h2 id="creating-a-new-theme" tabindex="-1"><a class="header-anchor" href="#creating-a-new-theme" aria-hidden="true">#</a> Creating A New Theme</h2><p>To create a new theme:</p><ul><li><p>Copy the <code>adempiere_default</code> folder under the theme directory and rename it to a suitable name. Alternatively, generate the folder structure from zk sources directly, such as a maven project, git, or extract a jar. You can also use a jar file if you don&#39;t intend to modify the components.</p></li><li><p>Log in to ADempiere as the System Administrator and create a new theme in the &quot;Application Dictionary → Theme Management&quot; window. Set the fields accordingly.</p></li><li><p>Copy or create any external .less files and modify them as required. These should be stored in the <code>zkwebui/less</code> folder.</p></li><li><p>Edit the <code>build-lesscss.xml</code> file to add a target for your new theme.</p></li><li><p>Build the ADempiere application and launch the server. The new theme should be available as a user preference or as the system default depending on how the Theme Management fields were set.</p></li></ul><h2 id="adding-external-less-css-files" tabindex="-1"><a class="header-anchor" href="#adding-external-less-css-files" aria-hidden="true">#</a> Adding External less/css Files</h2><p>Additional css files can be added to the theme by including them as resources in the Theme Resources tab of the Application Dictionary<code>{{#if: Theme Management | →Theme Management }}{{#if: | → }}{{#if: | → }} window.</code></p><p>Styles in these files can override the styles in the theme-specific zk.wcs file. Changes to these files will be posted to the server once saved and the changes will be visible when the browser is refreshed. It is strongly suggested that .less files be used to generate the css files as it is much easier to maintain .less files. Less files can be stored in the zkwebui/less folder and the output css.dsp files will be saved in the css folder using the same file name.</p><h2 id="compiling-less-to-css-dsp" tabindex="-1"><a class="header-anchor" href="#compiling-less-to-css-dsp" aria-hidden="true">#</a> Compiling less to css.dsp</h2><p>To aid in compiling less files to css.dsp files, a ANT build file has been added to the zkwebui folder - build-lesscss.xml. This file includes targets to compile the external css and/or the individual theme folders. Developers will find it helpful to create External Tool Configurations for these targets.</p><p>Changes to the external .less files can be compiled and are published on the fly so the update is available by refreshing the browser. Changes to the .less files in the theme folders require the server to be republished. (If someone could figure out how to do this on the fly, it would be helpful.)</p><h2 id="using-less-to-override-a-zk-style-or-create-a-new-component" tabindex="-1"><a class="header-anchor" href="#using-less-to-override-a-zk-style-or-create-a-new-component" aria-hidden="true">#</a> Using less To Override A zk Style or Create a New Component</h2>',23),l=(0,n.Uk)("lesscss is a powerful tool. To learn more about its capabilities, visit the "),a={href:"http://lesscss.org/",target:"_blank",rel:"noopener noreferrer"},d=(0,n.Uk)("lesscss.org"),r=(0,n.Uk)(" website or search for the numerous articles on its features on the web."),o=(0,n.uE)('<p>As an example of what it can do, here is the less code that is used to style the ADempiere Search Editor:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>.ad-search-editor,\n.ad-number-editor,\n.ad-pattribute-editor {\n\n\t// Search box \n\tborder: none; \n\tpadding: 0px; \n\tmargin: 0px; \n\tbackground-color: transparent;\n\t\n\t//\t\tString style = AEnv.isFirefox2() ? &quot;display: inline&quot;\n\t//\t\t\t: &quot;display: inline-block&quot;;\n\t//\tstyle = style\n\t//\t\t\t+ &quot;;border: none; padding: 0px; margin: 0px; background-color: transparent;&quot;;\t\n\t\n\ttable {\n\t\tborder: none; \n\t\tpadding: 0px; \n\t\tmargin: 0px;\n\t\twidth:\t100%;\n\t\tcellpadding: 0;\n\t\tcellspacing: 0;\t\t\n\t}\n\t\n\ttr {\n\t\twidth: 100%; \n\t\tborder: none; \n\t\tpadding: 0px; \n\t\tmargin: 0px; \n\t\twhite-space:nowrap;\n\t}\n\n\t.z-textbox {\n\t\t.leftBorderRadius(@borderRadiusSmall);\n\t    display: inline; \n\t    width: 100%;\n\t}\n\n\t.editor-button {\n\t\t.iconFontStyle(@baseFontSize, @iconColor);\n\t\twidth: @baseButtonWidth;\n\t\t&lt;c:if test=&quot;${ zk.ie == 8 }&quot;&gt;\n\t\t\twidth: @baseButtonWidth - 10;\n\t\t&lt;/c:if&gt;\n\t\theight: @baseButtonHeight;\n\t\t.rightBorderRadius(@borderRadiusSmall);\n\t\tpadding: 0px;\n\t\tline-height: @baseLineHeight;\n\t\tbackground: @inputBackgroundColor;\n\t\ttext-align: center;\n\t\tvertical-align: middle;\n\t\toverflow: hidden;\n\t\tcursor: pointer;\n\n\t\t&amp;:hover {\n\t\t\tborder-color: @hoverBorderColor;\n\t\t\t&lt;c:if test=&quot;${ zk.ie != 8 }&quot;&gt;\n\t\t\t\t.verGradient(@hoverGradientStart, @hoverGradientEnd);\n\t\t\t&lt;/c:if&gt;\n\t\t}\n\t\t&amp;:active {\n\t\t\tborder-color: @activeBorderColor;\n\t\t\t&lt;c:if test=&quot;${ zk.ie != 8 }&quot;&gt;\n\t\t\t\t.verGradient(@activeGradientStart, @activeGradientEnd);\n\t\t\t&lt;/c:if&gt;\n\t\t\t.boxShadow(&#39;inset 1px 1px 1px #91AAB7&#39;);\n\t\t}\n\t\tinput[disabled] + &amp; {\n\t\t\t&amp;:hover,\n\t\t\t&amp;:active {\n\t\t\t\tborder-color: @inputBorderColor;\n\t\t\t\t.resetGradient();\n\t\t\t\t.boxShadow(&#39;none&#39;);\n\t\t\t}\n\t\t}\n\n\t\timg {\n\t\t\tvertical-align: middle;\n\t\t\ttext-align: center;\n\t\t}\n\t}\n}\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="defining-css-classes-in-the-code" tabindex="-1"><a class="header-anchor" href="#defining-css-classes-in-the-code" aria-hidden="true">#</a> Defining CSS Classes in the Code</h2><p>When developing components, editors, forms and windows in Java, as much as possible, don&#39;t hard code the look and feel. Statements like &quot;component.setHeight(&quot;100%&quot;);&quot; should be avoided. Instead, use the theme system to determine the look and feel. Then, different themes can display the same component in different ways without the need to change the code.</p><p>To assist the theme developers, the main component classes - a class that implements or extends a major web component - should be given a css class name. (Call these SClass to avoid the confusion with java class.) In the constructor of the class or the initialization function, the SClass can be set with the ThemeUtils.addSClass(String sclassName, Component comp) function. For convenience, use the naming convention &quot;ad-classname&quot;, all in lowercase. The term major component, is meant to refer containers or elements that act as a parent for a number of other elements that all need to be styled together, or for individual components/elements that need a specific style applied.</p><div class="custom-container info"><p class="custom-container-title">Note:</p><p>The name format in java uses camelCase. In css, the convention is to use all lower case with hyphens to separate words. The css SClass prefix &quot;ad-&quot; identifies the next word as a ADempiere class name in lower case. Additional words can be added with hyphens as required.</p></div><ul><li>DefautlTheme</li><li>ThemeUtils</li><li>MTheme</li></ul>',7),c={},u=(0,t(13860).Z)(c,[["render",function(e,i){const t=(0,n.up)("ExternalLinkIcon");return(0,n.wg)(),(0,n.iD)("div",null,[s,(0,n._)("p",null,[l,(0,n._)("a",a,[d,(0,n.Wm)(t)]),r]),o])}]])},23787:(e,i,t)=>{t.r(i),t.d(i,{data:()=>n});const n=JSON.parse('{"key":"v-6d4b84b2","path":"/community/wiki/developers-guide/zk-theme-development.html","title":"ZK Theme Development","lang":"en-US","frontmatter":{"title":"ZK Theme Development","category":["Community"],"star":9,"sticky":9,"tag":["Wiki","Developer\'s Guide"],"article":false,"summary":"~~~ This document applies to branch ADEMPIERE-294 Upgrade to zk 7.02 which will be added as a patch after the release of 3.8.0. ~~~ Developing Themes ZK Configuration The following","head":[["meta",{"property":"og:url","content":"https://github.com/adempiere/adempiere-site.github.io/community/wiki/developers-guide/zk-theme-development.html"}],["meta",{"property":"og:title","content":"ZK Theme Development"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2023-08-25T14:41:16.000Z"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"es-ES"}],["meta",{"property":"article:tag","content":"Wiki"}],["meta",{"property":"article:tag","content":"Developer\'s Guide"}],["meta",{"property":"article:modified_time","content":"2023-08-25T14:41:16.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"Developing Themes","slug":"developing-themes","children":[{"level":3,"title":"ZK Configuration","slug":"zk-configuration","children":[]},{"level":3,"title":"The Theme Folder Structure","slug":"the-theme-folder-structure","children":[]}]},{"level":2,"title":"Creating A New Theme","slug":"creating-a-new-theme","children":[]},{"level":2,"title":"Adding External less/css Files","slug":"adding-external-less-css-files","children":[]},{"level":2,"title":"Compiling less to css.dsp","slug":"compiling-less-to-css-dsp","children":[]},{"level":2,"title":"Using less To Override A zk Style or Create a New Component","slug":"using-less-to-override-a-zk-style-or-create-a-new-component","children":[]},{"level":2,"title":"Defining CSS Classes in the Code","slug":"defining-css-classes-in-the-code","children":[]}],"git":{"createdTime":1692974476000,"updatedTime":1692974476000,"contributors":[{"name":"Jesús Albujas","email":"134967453+tecnicoerp@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":4.23,"words":1269},"filePathRelative":"community/wiki/developers-guide/zk-theme-development.md","localizedDate":"August 25, 2023"}')}}]);