"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6267],{85910:(e,i,t)=>{t.r(i),t.d(i,{default:()=>qe});var l=t(78e3);const n={class:"custom-container info"},o=(0,l._)("p",{class:"custom-container-title"},"Note:",-1),a=(0,l.Uk)("DISCLAIMER - This is an implementation guide written by "),r={href:"https://wiki.adempiere.net/User:Kittiu",target:"_blank",rel:"noopener noreferrer"},s=(0,l.Uk)("Kittiu"),c=(0,l.Uk)(", from "),p={href:"http://www.ecosoft.co.th/",target:"_blank",rel:"noopener noreferrer"},d=(0,l.Uk)("ecosoft"),u=(0,l.Uk)(" Bangkok. Other contributors are welcome to discuss on improving it."),m=(0,l._)("h2",{id:"overview",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#overview","aria-hidden":"true"},"#"),(0,l.Uk)(" Overview")],-1),h=(0,l.Uk)("ADempiere is a great Business Application. What make ADempeire different from others are not only its complete business features, but indeed its ability to extend its features. ADempeire "),g=(0,l.Uk)("Application Dictionary Framework"),w=(0,l.Uk)(" is very flexible and powerful. ADempiere is great about openness. All the technique has been document and discussed openly in this Wiki. The only thing developer need to do is to find and get familiar with all the concept, and try to connect all the jigsaw together. Which is in a way, quite difficult."),f=(0,l._)("p",null,"In this tutorial, we will be using a real usable yet simple module that I developed from a requirement of ADempiere ERP Project in Thailand. I will walk you through techniques needed to build a new module. And along the way, I will be referring to the more completed source of documentation. As such, it is highly recommended that the reader dig into each of the technique and try to understand them along with the tutorial.",-1),b=(0,l._)("p",null,"I hope this tutorial will get you started...faster!",-1),y=(0,l.Uk)("--"),v={href:"https://wiki.adempiere.net/User:Kittiu",target:"_blank",rel:"noopener noreferrer"},B=(0,l.Uk)("Kittiu"),_=(0,l.Uk)(" 14:01, 7 August 2011 (UTC), "),k={href:"http://www.ecosoft.co.th/",target:"_blank",rel:"noopener noreferrer"},C=(0,l.Uk)("ecosoft"),D=(0,l._)("h2",{id:"business-requirement-for-this-tutorial",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#business-requirement-for-this-tutorial","aria-hidden":"true"},"#"),(0,l.Uk)(" Business Requirement for this tutorial")],-1),T=(0,l._)("p",null,"We will call this new module - Billing. In some countries, at least for Thailand, there is a customary practice for companies to collect money from their customers only once in a month. For example, the customer has 3 payments due in a given month, the vendor or billing company should group all the due AR Invoices in a document call Billing Document and issue it with all the invoices consolidated to the customer on the Billing Day. The customer will be paying based on the payable amount shown in Billing Document in the following month.",-1),R=(0,l._)("h2",{id:"what-is-in-this-tutorial",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#what-is-in-this-tutorial","aria-hidden":"true"},"#"),(0,l.Uk)(" What is in this tutorial?")],-1),A=(0,l._)("p",null,"Techniques used in the tutorial includes,",-1),P=(0,l._)("li",null,[(0,l.Uk)("New Window & Table - Billing / Billing Line [1] "),(0,l._)("ul",null,[(0,l._)("li",null,"Billing Window is the main UI for the new functionality"),(0,l._)("li",null,"Billing Tab will be used as document header for the group of Invoice. User will specify the Business Partner and the Billed Date"),(0,l._)("li",null,"Billing Line Tab will be used to list all the due invoices, which are either generated by the criteria in Billing Tab or manually add in")])],-1),L=(0,l.Uk)("New Document Type - Billing "),S={href:"http://www.adempiere.com/How_to_create_a_new_document_with_specific_accounting",target:"_blank",rel:"noopener noreferrer"},I=(0,l.Uk)("[2]"),j=(0,l.Uk)("Couple of Validation Rules will be configured to make proper screening of data "),q={href:"http://www.adempiere.com/Validation_Rule#Validation_Rules",target:"_blank",rel:"noopener noreferrer"},x=(0,l.Uk)("[3]"),E=(0,l.Uk)("Java Callouts used by field in Billing Tab "),U={href:"http://www.adempiere.com/Callout",target:"_blank",rel:"noopener noreferrer"},W=(0,l.Uk)("[4]"),N=(0,l.Uk)("Java Process - Create Billing Lines from matched criteria in Billing tab "),F={href:"http://www.adempiere.com/Process",target:"_blank",rel:"noopener noreferrer"},M=(0,l.Uk)("[5]"),O=(0,l.Uk)("Jasper Report to create a new Billing Form which can be printed right from the Billing Tab "),G={href:"http://www.adempiere.com/index.php/Using_Jasper_Report_Form_in_place_of_Standard_Forms",target:"_blank",rel:"noopener noreferrer"},z=(0,l.Uk)("[6]"),V=(0,l.Uk)("Model Validator Technique that will intercept some processes into Payment Document's existing process "),J={href:"http://www.adempiere.com/ModelValidator",target:"_blank",rel:"noopener noreferrer"},Y=(0,l.Uk)("[7]"),K=(0,l.Uk)("For training purposes, download the source code (Billing_src.zip), PackIn package (Billing.zip), and a sample Jasper form (Billing_Form.jrxml) from "),H={href:"https://bitbucket.org/kittiu/billing/downloads",target:"_blank",rel:"noopener noreferrer"},X=(0,l.Uk)("DOWNLOAD HERE"),Q=(0,l.Uk)(" (as ADempiere Wiki now does not accept zip files, so I have to host them on Bitbucket)."),Z=(0,l.uE)('<h2 id="sample-test-steps" tabindex="-1"><a class="header-anchor" href="#sample-test-steps" aria-hidden="true">#</a> Sample Test Steps</h2><p>Following are the use case of this new module. We will be testing them along with development steps.</p><p>A customer has made 3 orders during the month. Sales orders are completed, and the goods has been shipped. Now it is the process of invoicing.</p><ul><li>User prepares 3 Invoices (Customer) issued to that customer. Let&#39;s give these invoices a due date at the end of the working month.</li><li>It is the normal practice (at least in Thailand) that customers will accept invoices from vendors only once a month. So, before that date, the user creates 1 Billing Document that summarizes the 3 invoices.</li><li>Print out the Billing forms and their associated Invoice forms. These forms will be printed out and issued to the customer.</li><li>Once money is paid by customers, the user uses the Payment window to process the AR Receipt. Allocate the Receipt Line with the help of the Billing Document.</li><li>User completes the AR Receipt, and the information (AR Receipt&#39;s DocNo) will be referenced back to the underlying Billing Document.</li></ul><h2 id="development-steps" tabindex="-1"><a class="header-anchor" href="#development-steps" aria-hidden="true">#</a> Development Steps</h2><p>Enough introduction, let&#39;s get our hands dirty!</p><h3 id="step-1-prepare-your-customization-environment" tabindex="-1"><a class="header-anchor" href="#step-1-prepare-your-customization-environment" aria-hidden="true">#</a> Step 1: Prepare Your Customization Environment</h3>',7),$=(0,l.Uk)("Recommended reading: "),ee=(0,l.Uk)("Create your ADempiere customization environment"),ie=(0,l.uE)('<p>In this tutorial, we assume that we only have 1 project &quot;ADempiere360LTS&quot; setup and functional. We will be creating a new Eclipse Project called &quot;BillingModule&quot; as our custom project.</p><ul><li>On your Eclipse, create a new Java Project called &quot;BillingModule&quot;</li><li>Add ADempiere360LTS to this project build path</li><li>Create Run Configuration for this new project</li><li>Run ADempiere from this Run Configuration</li></ul><h3 id="step-2-create-new-entity-type" tabindex="-1"><a class="header-anchor" href="#step-2-create-new-entity-type" aria-hidden="true">#</a> Step 2: Create new Entity Type</h3><p>This is one noteworthy step before we start any development. The Entity Type determines the ownership of Application Dictionary entries. Normally, entity (i.e., Window, Fields, Rules, etc...) are marked as &quot;Dictionary&quot; which means, ADempiere own entities. It is a good practice to always create a new Entity Type for your project. This will tell you which component belongs to your project.</p><p>It could be anything, but in this tutorial we will be using our Entity Type called, ECS_LCO (Ecosoft Thai Localization)</p><ol><li>Run ADempiere from Eclipse</li><li>Login as System Administrator</li><li>Open Entity Type window</li><li>Click New</li></ol><ul><li>Entity Type: ECS_LCO</li><li>Name: Thai Localisation</li><li>ModelPackage: org.ecosoft.model (&lt;--this will be used as default package later on when we run GenerateModel)</li></ul><ol start="5"><li>Click Save</li></ol><p>From now on, when you create any new components, set Entity Type to &quot;ECS_LCO&quot; when ever applicable.</p><h3 id="step-3-create-billing-tables-and-window" tabindex="-1"><a class="header-anchor" href="#step-3-create-billing-tables-and-window" aria-hidden="true">#</a> Step 3: Create Billing Tables and Window</h3><p>Recommended reading: <a href="a">NewWindow</a>, <a href="a">How to create a new document with specific accounting</a></p>',11),te=(0,l.Uk)("In this step, we will be creating a new Window (Billing) with 2 tabs (Billing and Billing Line). In normal practice, you will be using Application Dictionary to create the window. But for this tutorial purpose, it will be using too much time to create windows and fields one by one. Instead, we will install the pre-built package, Billing.zip downloaded form previous step. The Billing.zip is a 2Pack Package that I have created (PackOut) from my previous implementing of Billing module. "),le={href:"https://wiki.adempiere.net/2Pack",target:"_blank",rel:"noopener noreferrer"},ne=(0,l.Uk)("2Pack"),oe=(0,l.Uk)(" is a very useful feature when come to migration and worth experimenting in detail."),ae=(0,l.uE)('<p>Per say, we will use the ready to use Billing.zip to create,</p><ul><li>Billing window with 2 tabs, Billing and Billing Line</li><li>2 database tables for the UI, C_Billing and C_BillingLine</li><li>Some other required component, i.e., Field Validator, etc.</li></ul><p>To install Billing.zip</p><ol><li>Login as System Administrator</li><li>Open window &quot;PackIn - Import a package&quot;</li><li>New <ol><li>Package Source Type: File</li><li>Package Source: (Select the Billing.zip)</li><li>Package Directory: migration (&lt;-- PackIn will copy and expand Billing.zip in this directory)</li><li>Update system maintained application dictionary: Not checked</li></ol></li><li>Save and click to process &quot;PackIn&quot;</li></ol><div class="custom-container info"><p class="custom-container-title">Note:</p><p>The brief steps if create new window manually are</p><p>Login as System Administator Use Table and Column window to create new table, &quot;C_Billing&quot; and &quot;C_BillingLine&quot; Create Columns for both tables (we can also copy from existing table) Click &quot;Synchronize column&quot; button to create underlining tables in Database Use Window, Column and Field window to create a new window, &quot;Billing&quot; and 2 tabs, &quot;Billing&quot;, &quot;Billing Line&quot; Assign C_Billing table to Billing Tab and C_BillingLine to Billing Line Tab Click &quot;Create Fields&quot; button to create fields from columns Rearrange fields position and behavior (i.e., mandatory, readonly, etc...)</p></div><ul><li>Once the Tables and Windows are created (from PackIn), please review and see how they are configured. Open the &quot;Window, Tab and Field&quot; window and the &quot;Table and Column&quot; window and look for new Windows/Tables. Some notes on Columns/Fields here:</li></ul><p>Fields required on all Windows/Tables in ADempiere:</p><ul><li>AD_Client_ID, AD_Org_ID --&gt; Identify data owner</li><li>C_Billing_ID --&gt; Table ID</li><li>Created, CreatedBy, Updated, UpdatedBy --&gt; Updated automatically by PO object</li><li>IsActive --&gt; Good practice as active/inactive record</li></ul><p>Fields required as we want this Billing window to be a &quot;Document Type&quot; window:</p><ul><li>C_DocType_ID, DocumentNo, DocAction, DocStatus, Processed --&gt; Document control fields</li></ul><p><img src="/assets/img/community/developers-guide/Billing.jpg" alt="billing"></p><p><img src="/assets/img/community/developers-guide/Billingline.jpg" alt="billingline"></p><p>Explore the new window!</p><ol><li>Login as GardenAdmin, open the Billing window (located under menu Quote-to-Invoice --&gt; Sales Invoices). Then, explore Billing and Billing Line tabs.</li><li>You will notice from the window layout,</li></ol><ul><li>Billing is the main tab, Billing Line is the sub tab.</li><li>Some fields are mandatory.</li><li>Some callouts are being called, but not yet implemented.</li><li>Buttons are in place, but no process is attached, i.e., Generate Billing Line, Button to change DocAction.</li><li>Etc... (the best way to understand is to open the Application Dictionary of this window alongside).</li></ul><ol start="3"><li>Login as System, open the window, Window, Tab &amp; Field and search for Billing.</li></ol><ul><li>Billing tab is the main tab --&gt; Tab Level = 0</li><li>Billing Line tab is the sub tab --&gt; Tab Level = 1</li><li>Explore Table and Column for C_Billing: <ul><li>AD_Client_ID --&gt; Default logic = @#AD_Client_ID@, Mandatory</li><li>C_Billing_ID --&gt; Key Column, Mandatory</li><li>C_Bpartner_ID --&gt; Reference = Search, Callout = org.ecosoft.model.CalloutBilling.bPartner, Dynamic Validation = C_BPartner (Trx)</li></ul></li><li>Explore Table for C_BillingLine: <ul><li>C_BillingLine_ID --&gt; Key Column, Mandatory</li><li>C_Billing_ID --&gt; Parent Link Column</li><li>Line --&gt; @SQL=SELECT NVL(MAX(Line),0)+10 AS DefaultValue FROM C_InvoiceLine WHERE C_Billing_ID=@C_Billing_ID@</li></ul></li><li>Etc… (these setups come from the Billing.zip, some of them are already functional, some are not, i.e., CallOut java class)</li></ul><h3 id="step-4-generate-model-class-for-billing-and-billing-line-model" tabindex="-1"><a class="header-anchor" href="#step-4-generate-model-class-for-billing-and-billing-line-model" aria-hidden="true">#</a> Step 4: Generate Model Class for Billing and Billing Line model</h3>',18),re=(0,l.Uk)("Recommended reading: "),se={href:"https://wiki.adempiere.net/NewWindow#Generate_Model",target:"_blank",rel:"noopener noreferrer"},ce=(0,l.Uk)("NewWindow#Generate_Model"),pe=(0,l.uE)('<p>After previous step, we now have a new Billing window with its associate table. Though CRUD (Create/Read/Update/Delete) functionality is available, it is not yet very useful. Next step is to extend its functionality, we will have to create Model classes for them.</p><p>With Model class, we can make the control over the object (aka Window/Table) better. ADempiere provide a GenerateModel process to help generate Interface and PO Extension classes (I_ and X_ classes getter/setter).</p><ul><li>On your Eclipse, create a new Run Configurator, call it Generate Model. <ul><li>Project: ADempiere360LTS.</li><li>Main class: org.adempiere.util.GenerateModel.</li></ul></li></ul><p><img src="/assets/img/community/developers-guide/Generate_model.jpg" alt="generate-model"></p><p>To generate classes, use the following Arguments:</p><ul><li>D:\\temp\\Billing --&gt; where output classes will be placed. Ensure this folder is prepared, as ADempiere won&#39;t create it automatically.</li><li>org.ecosoft.model --&gt; package</li><li>&#39;ECS_LCO&#39; --&gt; Entity Type (our new tables have been marked as ECS_LCO)</li><li>&#39;C_Billing&#39; --&gt; Table to lookup</li></ul><p>Run the configuration, and the classes will be created in the D:\\temp\\Billing folder.</p><p>Repeat the same steps to generate model classes for C_BillingLine.</p><p>After completing the above steps:</p><ol><li>Navigate to D:\\temp\\Billing.</li><li>You should see 4 java files generated: I_C_Billing.java, X_C_Billing.java, I_C_BillingLine.java, X_C_BillingLine.java.</li></ol><p><img src="/assets/img/community/developers-guide/GenerateBillingModels.jpg" alt="generatebillingmodels"></p><p>Note: for the new model classes, you will notice in the file that, its package is org.ecosoft.model. This is because we have specified it in Entity Type</p><p>I_ and X_ are interface and get/set classes generated by GenerateModel class, and hence should not be modified. There is no implementation logic in these classes yet. Next we have to create the real model-extension class where the logic reside. As a rule of thumb, the name of Model for C_Billing table will be &quot;MCBilling&quot; (prefix with &quot;M&quot; and takeout &quot;_&quot;). More information about extending model can be found here.</p><p>As such, we will be creating 2 new model extension classes.</p><p>org.ecosoft.MCBilling.java org.ecosoft.MCBillingLine.java</p><p>Note that, these classes will extend the getter and setter classes (X_ classes) in previous steps. We can add more logic when a billing record is, i.e., saved, deleted, completed, etc. For training purpose we will be using the pre-written class provided in this tutorial.</p><h3 id="step-5-making-billing-a-document-type" tabindex="-1"><a class="header-anchor" href="#step-5-making-billing-a-document-type" aria-hidden="true">#</a> Step 5: Making Billing a Document Type</h3><p>Recommended reading: <a href="a">How to create a new document with specific accounting</a></p><p>If it is for window that simply keep master data, all implementation in previous steps is enough. But if the window will become a transaction data, or in the term of ERP system, become a &quot;Document&quot;, this step is necessary. Becoming a Document will embed the following behavior 1) have document status 2) have period control 3) have document workflow and 4) can create accounting fact (optional).</p><p>In our example, Billing is a kind document, but it will not have to create accounting fact.</p><p>To register for new Document Base Type - &quot;Billing&quot;, first, we will be registering the new type into References window.</p><ul><li>Login as System, open References window</li><li>Lookup for C_DocType DocBaseType</li><li>Select the List Validation tab and add a new entry <ul><li>Search Key: BIL</li><li>Name: Billing</li><li>Entity Type: Thai Localisation</li></ul></li></ul><p>Note: In our case, the Billing.zip already created it.</p><p>Extending C_DocType for new DocType</p><ul><li>There is a class in ADempiere X_C_DocType.java (located in base/src org.compiere.model) which contains all constants of document types in the system. As we have new DocType, at first glance it would be easy to overwrite it to accommodate the new DocType, i.e., in this case to add a Constant into existing X_C_DocType.java</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/** Billing = BIL */\n\tpublic static final String DOCBASETYPE_Billing = &quot;BIL&quot;;\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>But overwriting the existing class is not a good practice, the BETTER way is --&gt; in our BillingModule project directory create a new interface (I call it &quot;Extension Interface&quot;), I_C_DocType.java that extend the existing I_C_Doctype.java</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>package org.ecosoft.model;\n\npublic interface I_C_DocType extends org.compiere.model.I_C_DocType\n{\n\tpublic static final String DOCBASETYPE_Billing = &quot;BIL&quot;;\n}\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',28),de=(0,l.Uk)("Note: More suggestion on extending the interface class was discussed by "),ue={href:"https://wiki.adempiere.net/User:Teo_sarca",target:"_blank",rel:"noopener noreferrer"},me=(0,l.Uk)("User:Teo_sarca"),he=(0,l.Uk)(),ge={href:"http://sourceforge.net/projects/adempiere/forums/forum/610548/topic/4645417?message=10578224",target:"_blank",rel:"noopener noreferrer"},we=(0,l.Uk)("here"),fe=(0,l.Uk)("."),be=(0,l.uE)('<p>Up to here, all the model classes necessary for new model is created, let&#39;s install all the new classes into Eclipse.</p><p><img src="/assets/img/community/developers-guide/Billing_classes_eclipse_rev2.jpg" alt="Billing-classes-2"></p><p>To add this new Billing document type to use, i.e., for &quot;Garden World&quot; client.</p><ul><li>Login to client &quot;Garden World&quot; using GardenAdmin role.</li><li>Run process Verify Document Type --&gt; This will make Billing a new Document Type. I.e., Register Billing (BIL) in Document Type window, create Billing&#39;s Document - Actions, create Billing Document&#39;s Workflow, create Calendar Periods for it, etc...</li><li>Run process Role Access Update --&gt; This ensure that, people are granted access right to execute the document process. This tutorial will not go in-dept about the Java Code. But you can explore MCBilling.java and MCBillingLine.java and see what additional logic we try to achieve - when some event occur with Billing document</li></ul><p>Now, from eclipse, stop and rerun the Application and notice changes,</p><p>What are added?</p><p>In Billing Window</p><ul><li>Create new Billing record</li><li>Document Type = Billing (now exists)</li><li>Document No is now running</li><li>Clicking the Complete button, DocAction is shown</li></ul><p>In Workflow window</p><ul><li>You will see new Document Process for Billing</li></ul><p>In Calendar Year and Period window</p><ul><li>You will see periods for new Billing Document Type</li></ul><p>In Role window</p><p>In Document Action Access, you will see all DocAction for new Billing Document Type</p><p><img src="/assets/img/community/developers-guide/Billing1.jpg" alt="billing1"></p><p>Up to this point, the new window is functional. But according to the Business Requirement, we still miss some important pieces of code.</p><ul><li>Callout: To make the UI more interactive, filling one field triggers the retrieval and automatic filling of information in other fields.</li><li>Process: To execute an internal process by clicking a button in the Billing window.</li><li>Report: To display the Jasper Form of the Billing document when clicking on the Billing window&#39;s Print Preview.</li><li>ModelValidator: To enhance interaction with other existing processes without modifying the existing code.</li></ul><p>We will see them in the next steps</p><h3 id="step-6-create-java-callout" tabindex="-1"><a class="header-anchor" href="#step-6-create-java-callout" aria-hidden="true">#</a> Step 6: Create Java Callout</h3>',19),ye=(0,l.Uk)("Recommended reading: "),ve=(0,l.Uk)("Callout"),Be=(0,l.uE)('<p>What we want to achieve with callout class here?</p><p>Get the billing location for the selected Business Partner Register the callout class</p><ul><li>Login as System, open Table and Column window</li><li>Look for C_Billing table, C_Bpartner_ID column</li><li>Make sure that the callout is org.ecosoft.model.CalloutBilling.bPartner</li><li>This explains that when C_Bpartner_ID is changed, it will call the method bPartner() of class CalloutBilling</li><li>Create a class CalloutBilling in the package org.ecosoft.model</li></ul><p><img src="/assets/img/community/developers-guide/Billing_callout.jpg" alt="billing-callout"></p><div class="custom-container note"><p class="custom-container-title">Note:</p><p>For this tutorial, we can use the source code provided in Billing_src.zip.</p></div><p>Test the callout</p><ul><li>Start Adempiere from Eclipse.</li><li>Login as GardenAdmin, open Billing window.</li><li>Select the Business Partner, and now you should see that the Location field is changed to the billing address automatically.</li></ul><p>Note: Callout class is extended from Callout Engine class. When the function is called, the caller will provide the information as following -- Properties ctx, int WindowNo, GridTab mTab, GridField mField, Object value</p><h3 id="step-7-create-java-process" tabindex="-1"><a class="header-anchor" href="#step-7-create-java-process" aria-hidden="true">#</a> Step 7: Create Java Process</h3>',9),_e=(0,l.Uk)("Recommended reading: "),ke=(0,l.Uk)("Process"),Ce=(0,l.uE)('<p>What we want to achieve with Generate Billing Lines process?</p><p>What we want to achieve with Generate Billing Lines process?</p><ul><li>Create billing lines based on the open invoice of the selected customers which their due date are not beyond due date on the billing.</li></ul><p>Register the Process class</p><ul><li>Login as System, open Report &amp; Process.</li><li>Create a new process. <ul><li>Search Key: GenerateBillingLine.</li><li>Name: Generate Billing Line.</li><li>Data Access Level: Client + Organization.</li><li>Classname: org.ecosoft.process.GenerateBillingLine.</li></ul></li><li>Save the record.</li><li>No parameter required (RECORD_ID will be passed to the process by default).</li><li>Open Table and Column window.</li><li>Look for C_Billing table, GenerateBillingLine column.</li><li>You will notice that this column is of reference type &quot;Button&quot;. Clicking the button will trigger the process.</li><li>Make sure that the process is set as GenerateBillingLine_Generate Billing Line.</li></ul><p><img src="/assets/img/community/developers-guide/Generate_billingline_process.jpg" alt="generate-billing-process"></p><ul><li>Create a class GenerateBillingLine in the package org.ecosoft.process</li><li>For training purpose, we will use the pre-written class. But please notice from the code to learn how it works.</li></ul><p><img src="/assets/img/community/developers-guide/Generatebilllingline_rev2.jpg" alt="gener-bill-ling-line"></p><p><strong>Note</strong>: Up to this point, the general use of Billing window is ready. User can create new Billing record. Provided the Invoice DueDate and Business Partner, clicking on Generate Billing Line button will create Billing Line based on the invoices that meet the criteria.</p><h2 id="test-create-new-billing-that-summarize-invoices-customer" tabindex="-1"><a class="header-anchor" href="#test-create-new-billing-that-summarize-invoices-customer" aria-hidden="true">#</a> Test: Create new Billing that summarize invoices (customer)</h2><p>As the process will look up for the completed invoices that match the criteria on the Billing window, i.e., Business Partner, Billing Date, before running this test, make sure you created and completed Invoice (customer) for this Business Partner, i..e, C&amp;W Construction (Invoice&#39;s Due Date + Payment Term &lt; Billing Date).</p><p>Create Billing document for a specific customer</p><ul><li>Login as Garden Admin, open Billing window</li><li>New Billing record, i.e., <ul><li>Document Type: Billing</li><li>Business Partner: C&amp;W Construction</li><li>Due Date: End of Month (cover all the completed invoices that reach the due date)</li></ul></li><li>Billing Location will be automatically selected (by callout)</li><li>Click on Generate Billing Lines button, and click OK to confirm create lines</li></ul><p>Note: This process will lookup for all completed AR Invoices for this Business Partner that has due date (after payment term) before or equal the due date, then create them as Billing Lines.</p><ul><li>You should notice the billing lines as following,</li></ul><p><img src="/assets/img/community/developers-guide/Billinglines_generated.jpg" alt="billings-generated"></p><ul><li>And on Billing tab, notice the Checque Received Date = n/a as customer did not pay yet. Now, complete this document!</li></ul><p><img src="/assets/img/community/developers-guide/Billing_status.jpg" alt="billing-status"></p><p>Next we will make it more useful by making a Jasper Form for this window and make it more interactive with other existing process using ModelValidator.</p><h2 id="step-8-register-jasper-report-for-billing-form" tabindex="-1"><a class="header-anchor" href="#step-8-register-jasper-report-for-billing-form" aria-hidden="true">#</a> Step 8: Register Jasper Report for Billing Form</h2><p>Recommended reading: <a href="a">Using Jasper Report Form in place of Standard Forms</a></p><p>Although the Billing document is completed, you will notice that the Print Preview button is not available. This is because there is no form register for this window yet.</p><p><img src="/assets/img/community/developers-guide/No_billing_form.jpg" alt="no-billing"></p><p>Create a new Jasper Form using iReport</p><ul><li>For training purposes, we will be using a ready-to-use form named &quot;Billing_Form.jrxml&quot;.</li><li>Explore this form. This is a simple Jasper Report form, but do notice the input parameter - RECORD_ID. This parameter is passed by ADempiere when the user clicks on the Print Preview button.</li><li>Compile and test this form by previewing it. Jasper will open up the input parameter box &quot;RECORD_ID&quot;. Please enter the Billing Record ID (C_Billing_ID) that you want to test.</li><li>You will find the compiled version of Billing_Form.jrxml as &quot;Billing_Form.jasper&quot; in the same folder.</li></ul><p>Register new Billing Form to Billing Tab</p><ul><li>Open Report &amp; Process window</li><li>New <ul><li>Search Key: BillingForm</li><li>Name: Billing Form</li><li>Data Access Level: Client + Organization</li><li>Report: Checked</li><li>Jasper Report: attachment:Billing_Form.jasper</li></ul></li><li>As we are using the attachment: directive, we will attach the .jasper file directly with this record.</li><li>Click on the Attachment icon on the menu, and attach Billing_Form.jasper.</li></ul><p>Note: There are more better ways of deploying Jasper Report, you can read it here.</p><p>For the simplicity of the tutorial, we will use attachment.</p><p><img src="/assets/img/community/developers-guide/Attach_billing_form.jpg" alt="attach-billing"></p><p>Register the Billing Form with Billing Tab</p><ul><li>Open Window, Tab &amp; Field window</li><li>Lookup for Billing Tab, set the Process to BillingForm_Billing Form</li></ul><p><img src="/assets/img/community/developers-guide/Register_billing_form.jpg" alt="register-billing"></p><h3 id="test-print-preview-billing-form" tabindex="-1"><a class="header-anchor" href="#test-print-preview-billing-form" aria-hidden="true">#</a> Test: Print Preview - Billing Form</h3><ul><li>Login as Garden Admin, open Billing window, and find our last active record.</li><li>Now, as the form got registered, the Print Preview button will now be enabled</li></ul><p><img src="/assets/img/community/developers-guide/Yes_billing_form.jpg" alt="register-form"></p><ul><li>Simply click on the Print Preview button</li></ul><p><img src="/assets/img/community/developers-guide/Billing_form_preview.jpg" alt="billing-form-preview"></p><h3 id="step-8-new-java-process-generate-lines-from-billing-process-payment-window" tabindex="-1"><a class="header-anchor" href="#step-8-new-java-process-generate-lines-from-billing-process-payment-window" aria-hidden="true">#</a> Step 8: New Java Process - Generate Lines from Billing Process (Payment window)</h3><p>Start from this step, we will be enhancing the existing Payment window to be able to interact with the Billing module. When doing the AR Receipt on Payment window, by clicking at a button, user should be able to allocate invoices based on the issued Billing Document.</p><p>Before we can do that, we need to have a new Button &quot;Create lines from...&quot; button and a new field &quot;Billing Document&quot;. And like previous steps, we will be registering new Java Process to that button.</p><p>But again, for this tutorial, our Billing.zip package has created those necessary Application Dictionary elements for us. Please refer to Application Dictionary for table C_Payment (column - CreateForm and C_Billing_ID) and window Payment (field - Create lines form... and Billing Document) on how they are configured.</p><p><img src="/assets/img/community/developers-guide/New_billing_fields_payment.jpg" alt="new-billing"></p><ul><li><p>Setup new Dynamic Validation Rule (used for the process window)</p></li><li><p>Login as System, open Validation window</p></li><li><p>Validation Rule</p><ul><li>Name: C_Billing of BPartner</li><li>Entity Type: Thai Localisation</li></ul></li><li><p>Validation Code (SQL): C_Billing.C_BPartner_ID=@C_BPartner_ID@ AND C_Billing.DocStatus IN (&#39;CO&#39;)</p></li></ul><p><img src="/assets/img/community/developers-guide/Billing_validation_code.jpg" alt="billing-validation_code"></p><p>Register the Process Class</p><ul><li>Open Report &amp; Process window</li><li>New <ul><li>Search Key: CreateLineFromBilling</li><li>Name: Create Line From Billing</li><li>Data Access Level: Client + Organization</li><li>Classname: org.ecosoft.process.CreateLineFromBilling</li></ul></li><li>Click on Parameter Tab, New <ul><li>Name: Billing Number</li><li>DB Column Name: C_Billing_ID</li><li>System Element: C_Billing_ID</li><li>Reference: Table Direct</li><li>Dynamic Validation: C_Billing of Bpartner</li></ul></li><li>Save the record</li></ul><p>Register the new process – Generate Lines from Billing</p><ul><li>Open Table and Column window</li><li>For C_Payment table, look for CreateFrom column,</li><li>Make sure that process is CreateLineFromBilling_Generate Lines from Billing</li></ul><p>On Eclipse, also register the new Java Class</p><ul><li>Create a class CreateLineFromBilling.java in the package org.ecosoft.process</li></ul><p><img src="/assets/img/community/developers-guide/CreateLineFromBilling.jpg" alt="createline"></p><h3 id="test-ar-receipt-allocate-the-receipt-with-the-help-of-billing-document" tabindex="-1"><a class="header-anchor" href="#test-ar-receipt-allocate-the-receipt-with-the-help-of-billing-document" aria-hidden="true">#</a> Test: AR Receipt, allocate the Receipt with the help of Billing Document</h3><p>After getting the payment from customer, create the new AR Receipt</p><ul><li>Restart Adempiere from Eclipse.</li><li>Login as GardenAdmin.</li><li>Run the Role Access Process to ensure that the user has rights to the new process.</li><li>Open the Receipt window.</li><li>Create a new AR Receipt document. <ul><li>Select Business Partner: C&amp;W Construction.</li></ul></li><li>Click on the &quot;Create lines from…&quot; button. This will show the Billing Document popup window.</li></ul><p>Select the Billing Number from previous step and click OK. This will create Allocation lines from Billing lines.</p><p><img src="/assets/img/community/developers-guide/Payment_allocated_billing.jpg" alt="payment-allocated"></p><h2 id="step-8-intercept-other-process-with-modelvalidator" tabindex="-1"><a class="header-anchor" href="#step-8-intercept-other-process-with-modelvalidator" aria-hidden="true">#</a> Step 8: Intercept other process with ModelValidator</h2>',58),De=(0,l.Uk)("Recommended reading: "),Te=(0,l.Uk)("ModelValidator"),Re=(0,l.uE)('<p>What we want to achieve with Model Validator?</p><ul><li>ModelValidator is the good way to intercept existing process without overwrite the existing code.</li><li>This case, we want to intercept the process in AR Receipt document process <ul><li>After COMPLETE the Payment (receipt) Document, update the Billing Document associate with it</li></ul></li></ul><p>Register the ModelValidator class</p><ul><li>Login as System, open Model Validator window.</li><li>Create a new record. <ul><li>Entity Type: Thai Localisation.</li><li>Name: Model Validator for Billing Module.</li><li>Model Validation Class: org.ecosoft.model.BillingValidator.</li><li>Sequence: 2.</li></ul></li><li>Save the record.</li></ul><p>Note: ModelValidator can be registered in both System and Clint level. In this case, we are registering at System level.</p><p><img src="/assets/img/community/developers-guide/Billing_modelvalidator.jpg" alt="billing-modelvalidator"></p><ul><li>Create a class BillingValidator in the package org.ecosoft.model</li></ul><p><img src="/assets/img/community/developers-guide/Billingvalidator.jpg" alt="billingvalidator"></p><p>You can read the code in BillingValidator.java and notice how event is registered for C_Payment</p><h2 id="test-complete-the-ar-receipt" tabindex="-1"><a class="header-anchor" href="#test-complete-the-ar-receipt" aria-hidden="true">#</a> Test: Complete the AR Receipt</h2><p>Complete the AR Receipt</p><ul><li>Restart Adempiere from Eclipse.</li><li>Login as GardenAdmin.</li><li>Open the Receipt window and look for the AR Receipt record from the previous step.</li><li>On the Receipt tab, fill in the receipt amount (i.e., 142.75 USD).</li><li>Complete the AR Receipt Document.</li></ul><p>See the effect of AR Receipt document complete to the referenced Billing Document.</p><ul><li>Open to the referred Billing Document</li><li>Now you will see document status changed to Closed</li><li>And Cheque Received Date is now updated</li></ul><p><img src="/assets/img/community/developers-guide/Billing_paid.jpg" alt="billing-paid"></p><h2 id="step-9-deploy-billing-jar-package" tabindex="-1"><a class="header-anchor" href="#step-9-deploy-billing-jar-package" aria-hidden="true">#</a> Step 9: Deploy Billing.jar Package</h2><p>Now, we have all the functionalites we need for this new module. Meanwhile, we still run it directly from Eclipse. For development period, this is ok. But what if we want to use it on our production server?</p><p>So, next, let&#39;s deploy! The concept is easy, just make the Billing.jar file out of the Eclipse and deploy them in the server.</p><p><img src="/assets/img/community/developers-guide/Export_jar_window.jpg" alt="export-jar"></p><ol><li>From Eclipse, right click on BillingModule project --&gt; Export --&gt; JAR File, name the file &quot;Billing.jar&quot; and click next to export it</li><li>Since this is a new package (work as separately as module), we can deploy them package folder. Deploy to ADEMPIERE_HOME\\packages\\Billing\\lib\\Billing.jar</li><li>RUN_silentsetup .sh/.bat to include this new package into the application.</li></ol>',20),Ae={class:"custom-container info"},Pe=(0,l.uE)('<p class="custom-container-title">Note:</p><p>Adempeiere Precedence of JAR</p><ol><li>Customization.jar</li><li>Patches.jar</li><li><code>&lt;Package&gt;</code>.jar (i.e., LiberoHR.jar, LiberoManu.jar, etc…)</li><li>Adempiere.jar</li></ol><p>Deploying as a new JAR</p><ul><li>Copy and Paste to Adempiere <ul><li>As customization.jar in C:\\Adempiere\\lib</li><li>As <code>&lt;Package&gt;</code>.jar in <code>C:\\Adempiere\\Packages\\&lt;Package&gt;\\lib\\&lt;Package&gt;.jar</code></li></ul></li><li>Execute Run_Setup.bat or RUN_SilentSetup.bat to include the new classes into the system runtime</li></ul><h2 id="summary" tabindex="-1"><a class="header-anchor" href="#summary" aria-hidden="true">#</a> Summary</h2><p>As you will see now, ADempiere is a great tool to develop new Business Application. This sample module is utilizing most of the important techniques available in ADempiere and try to connect them together in a single tutorial. Yet, these are just the basic steps to understand ADempiere. I do highly recommended the reader to read though all the links provided in this tutorial.</p>',7),Le=(0,l.Uk)("If this tutorial has any typo error or is not clear enough, please do help me in suggesting any edits or by giving your feedback in the "),Se=(0,l.Uk)("Discussion"),Ie=(0,l.Uk)(" page. Thank you and have fun!"),je={},qe=(0,t(13860).Z)(je,[["render",function(e,i){const t=(0,l.up)("ExternalLinkIcon"),je=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",n,[o,(0,l._)("p",null,[a,(0,l._)("a",r,[s,(0,l.Wm)(t)]),c,(0,l._)("a",p,[d,(0,l.Wm)(t)]),u])]),m,(0,l._)("p",null,[h,(0,l.Wm)(je,{to:"/community/wiki/developers-guide/application-dictionary.html"},{default:(0,l.w5)((()=>[g])),_:1}),w]),f,b,(0,l._)("p",null,[y,(0,l._)("a",v,[B,(0,l.Wm)(t)]),_,(0,l._)("a",k,[C,(0,l.Wm)(t)])]),D,T,R,A,(0,l._)("ul",null,[P,(0,l._)("li",null,[L,(0,l._)("a",S,[I,(0,l.Wm)(t)])]),(0,l._)("li",null,[j,(0,l._)("a",q,[x,(0,l.Wm)(t)])]),(0,l._)("li",null,[E,(0,l._)("a",U,[W,(0,l.Wm)(t)])]),(0,l._)("li",null,[N,(0,l._)("a",F,[M,(0,l.Wm)(t)])]),(0,l._)("li",null,[O,(0,l._)("a",G,[z,(0,l.Wm)(t)])]),(0,l._)("li",null,[V,(0,l._)("a",J,[Y,(0,l.Wm)(t)])]),(0,l._)("li",null,[K,(0,l._)("a",H,[X,(0,l.Wm)(t)]),Q])]),Z,(0,l._)("p",null,[$,(0,l.Wm)(je,{to:"/community/wiki/developers-guide/create-your-adempiere-development-environment.html"},{default:(0,l.w5)((()=>[ee])),_:1})]),ie,(0,l._)("p",null,[te,(0,l._)("a",le,[ne,(0,l.Wm)(t)]),oe]),ae,(0,l._)("p",null,[re,(0,l._)("a",se,[ce,(0,l.Wm)(t)])]),pe,(0,l._)("p",null,[de,(0,l._)("a",ue,[me,(0,l.Wm)(t)]),he,(0,l._)("a",ge,[we,(0,l.Wm)(t)]),fe]),be,(0,l._)("p",null,[ye,(0,l.Wm)(je,{to:"/community/wiki/developers-guide/callout.html"},{default:(0,l.w5)((()=>[ve])),_:1})]),Be,(0,l._)("p",null,[_e,(0,l.Wm)(je,{to:"/community/wiki/developers-guide/process.html"},{default:(0,l.w5)((()=>[ke])),_:1})]),Ce,(0,l._)("p",null,[De,(0,l.Wm)(je,{to:"/community/wiki/developers-guide/model-validator.html"},{default:(0,l.w5)((()=>[Te])),_:1})]),Re,(0,l._)("div",Ae,[Pe,(0,l._)("p",null,[Le,(0,l.Wm)(je,{to:"/community/wiki/developers-guide/how-to-create-a-complete-new-module-in-adempiere.html"},{default:(0,l.w5)((()=>[Se])),_:1}),Ie])])])}]])},77710:(e,i,t)=>{t.r(i),t.d(i,{data:()=>l});const l=JSON.parse('{"key":"v-d258c1e4","path":"/community/wiki/developers-guide/how-to-create-a-complete-new-module-in-adempiere.html","title":"How to create a complete new module in ADempiere","lang":"en-US","frontmatter":{"title":"How to create a complete new module in ADempiere","category":["Community"],"star":9,"sticky":9,"tag":["Wiki","Developer\'s Guide"],"article":false,"summary":"Note: DISCLAIMER - This is an implementation guide written by Kittiu, from ecosoft Bangkok. Other contributors are welcome to discuss on improving it. Overview ADempiere is a great","head":[["meta",{"property":"og:url","content":"https://github.com/adempiere/adempiere-site.github.io/community/wiki/developers-guide/how-to-create-a-complete-new-module-in-adempiere.html"}],["meta",{"property":"og:title","content":"How to create a complete new module in ADempiere"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2023-08-25T14:41:16.000Z"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"es-ES"}],["meta",{"property":"article:tag","content":"Wiki"}],["meta",{"property":"article:tag","content":"Developer\'s Guide"}],["meta",{"property":"article:modified_time","content":"2023-08-25T14:41:16.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"Overview","slug":"overview","children":[]},{"level":2,"title":"Business Requirement for this tutorial","slug":"business-requirement-for-this-tutorial","children":[]},{"level":2,"title":"What is in this tutorial?","slug":"what-is-in-this-tutorial","children":[]},{"level":2,"title":"Sample Test Steps","slug":"sample-test-steps","children":[]},{"level":2,"title":"Development Steps","slug":"development-steps","children":[{"level":3,"title":"Step 1: Prepare Your Customization Environment","slug":"step-1-prepare-your-customization-environment","children":[]},{"level":3,"title":"Step 2: Create new Entity Type","slug":"step-2-create-new-entity-type","children":[]},{"level":3,"title":"Step 3: Create Billing Tables and Window","slug":"step-3-create-billing-tables-and-window","children":[]},{"level":3,"title":"Step 4: Generate Model Class for Billing and Billing Line model","slug":"step-4-generate-model-class-for-billing-and-billing-line-model","children":[]},{"level":3,"title":"Step 5: Making Billing a Document Type","slug":"step-5-making-billing-a-document-type","children":[]},{"level":3,"title":"Step 6: Create Java Callout","slug":"step-6-create-java-callout","children":[]},{"level":3,"title":"Step 7: Create Java Process","slug":"step-7-create-java-process","children":[]}]},{"level":2,"title":"Test: Create new Billing that summarize invoices (customer)","slug":"test-create-new-billing-that-summarize-invoices-customer","children":[]},{"level":2,"title":"Step 8: Register Jasper Report for Billing Form","slug":"step-8-register-jasper-report-for-billing-form","children":[{"level":3,"title":"Test: Print Preview - Billing Form","slug":"test-print-preview-billing-form","children":[]},{"level":3,"title":"Step 8: New Java Process - Generate Lines from Billing Process (Payment window)","slug":"step-8-new-java-process-generate-lines-from-billing-process-payment-window","children":[]},{"level":3,"title":"Test: AR Receipt, allocate the Receipt with the help of Billing Document","slug":"test-ar-receipt-allocate-the-receipt-with-the-help-of-billing-document","children":[]}]},{"level":2,"title":"Step 8: Intercept other process with ModelValidator","slug":"step-8-intercept-other-process-with-modelvalidator","children":[]},{"level":2,"title":"Test: Complete the AR Receipt","slug":"test-complete-the-ar-receipt","children":[]},{"level":2,"title":"Step 9: Deploy Billing.jar Package","slug":"step-9-deploy-billing-jar-package","children":[]},{"level":2,"title":"Summary","slug":"summary","children":[]}],"git":{"createdTime":1692974476000,"updatedTime":1692974476000,"contributors":[{"name":"Jesús Albujas","email":"134967453+tecnicoerp@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":14.92,"words":4476},"filePathRelative":"community/wiki/developers-guide/how-to-create-a-complete-new-module-in-adempiere.md","localizedDate":"August 25, 2023"}')}}]);