"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5208],{25248:(e,a,n)=>{n.r(a),n.d(a,{default:()=>x});var s=n(68152);const t=(0,s.IL)('<p>Un Script Callout (también conocido como Callout) es un mecanismo que permite a los desarrolladores y usuarios avanzados personalizar y extender la funcionalidad del sistema.</p><p>Un Script Callout es un fragmento de código que se ejecuta en respuesta a un evento específico en ADempiere, como por ejemplo:</p><ul><li>Al guardar un registro</li><li>Al validar un campo</li><li>Al procesar un documento</li><li>Al realizar una acción específica en una ventana</li></ul><p>Los Script Callouts son una forma poderosa de personalizar ADempiere sin necesidad de modificar el código fuente del sistema, lo que facilita la implementación de requisitos específicos de los usuarios.</p><h2 id="variables-y-parametros" tabindex="-1"><a class="header-anchor" href="#variables-y-parametros" aria-hidden="true">#</a> Variables y Párametros</h2><p>Dentro del script puedes usar:</p><ul><li>Las variables de contexto de ventana comienzan con el prefijo <code>W_</code>.</li><li>Las variables de contexto de inicio de sesión comienzan con el prefijo <code>G_</code>.</li><li>Los parámetros para llamadas (callouts) comienzan con el prefijo <code>A_</code>: <ul><li><code>A_WindowNo</code>: Número de la ventana desde la cual se invoca la llamada.</li><li><code>A_Tab</code>: La pestaña actual.</li><li><code>A_Field</code>: El campo con el que se está interactuando.</li><li><code>A_Value</code>: El valor actual del campo.</li><li><code>A_OldValue</code>: El valor anterior del campo.</li><li><code>A_Ctx</code>: El contexto actual de la llamada.</li></ul></li></ul><h2 id="lenguajes-de-scripting-y-sintaxis" tabindex="-1"><a class="header-anchor" href="#lenguajes-de-scripting-y-sintaxis" aria-hidden="true">#</a> Lenguajes de Scripting y Sintaxis</h2>',8),l={href:"https://groovy-lang.org/index.html",target:"_blank",rel:"noopener noreferrer"},o={href:"https://www.jython.org/",target:"_blank",rel:"noopener noreferrer"},i={href:"https://beanshell.github.io/manual/contents.html",target:"_blank",rel:"noopener noreferrer"},r=(0,s.IL)('<p>Cuando crees la regla, debes establecer en el campo <strong>Código</strong> lo siguiente dependiendo del lenguaje que estes empleando:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>beanshell:YourCalloutName\ngroovy:YourCalloutName\njython:YourCalloutName\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para llamar a un script desde un Callout, sigue esta sintaxis de ejemplo:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>@script:beanshell:YourCalloutName\n@script:groovy:YourCalloutName\n@script:jython:YourCalloutName\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Establezca el Tipo de Evento como Callout y el Tipo de Regla como JSR 223 Scripting APIs.</li></ul><h2 id="crear-regla" tabindex="-1"><a class="header-anchor" href="#crear-regla" aria-hidden="true">#</a> Crear Regla</h2><p>Para este ejemplo realizaremos un &quot;Hola Mundo&quot; que se imprimirá en consola.</p><p><img src="/assets/img/community/developers-guide/CreateRule.png" alt="Crear una Regla"></p><p>Formato usado proporcionado para copiar y pegar:</p><ul><li>Código: <code>beanshell:HelloWorld</code></li><li>Nombre: <code>HelloWorldInCallout</code></li><li>Tipo de Evento: <code>Callout</code></li><li>Tipo de Regla: <code>JSR 223 Scripting APIs</code></li><li>Script:</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World ADempiere&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="configurar-callout-desde-tabla-y-columna" tabindex="-1"><a class="header-anchor" href="#configurar-callout-desde-tabla-y-columna" aria-hidden="true">#</a> Configurar Callout desde <code>Tabla y Columna</code></h2><p>Para llamar el callout debes ir a la ventana <strong>Tabla y Columna</strong> buscar la tabla deseada, entrar en la pestaña <strong>Columna</strong> y rellenar el campo <strong>Callout</strong> ubicado al final.</p><p>Para este ejemplo se colocará el callout en la tabla <strong>A_Asset</strong> (Activo Fijo), en la columna <strong>M_Product_ID</strong> (Producto)</p><p><img src="/assets/img/community/developers-guide/CalloutInColumn.png" alt="Callout en Columna"></p>',15),p={class:"hint-container note"},c=(0,s.QD)("p",{class:"hint-container-title"},"Nota",-1),u=(0,s.QD)("strong",null,"Callout",-1),d={href:"https://www.adempiere.io/es/community/wiki/developers-guide/script-callout.html#lenguajes-de-scripting",target:"_blank",rel:"noopener noreferrer"},m=(0,s.QD)("p",null,[(0,s.mY)("Este Callout se activará cuando en la ventana "),(0,s.QD)("strong",null,"Activos Fijos"),(0,s.mY)(" se seleccione un producto cualquiera:")],-1),g=(0,s.QD)("p",null,[(0,s.QD)("img",{src:"/assets/img/community/developers-guide/SelectProductInAsset.png",alt:"Callout en Columna"})],-1),v=(0,s.QD)("p",null,'En consola veremos nuestro "Hola Mundo"',-1),k=(0,s.QD)("p",null,[(0,s.QD)("img",{src:"/assets/img/community/developers-guide/HelloWorld.png",alt:"Hola Mundo"})],-1),b=(0,s.QD)("strong",null,"Callout",-1),h=(0,s.QD)("strong",null,"Reglas",-1),y=(0,s.QD)("strong",null,"Tipo de Evento",-1),f=(0,s.IL)('<h2 id="variable-result" tabindex="-1"><a class="header-anchor" href="#variable-result" aria-hidden="true">#</a> Variable Result</h2><p>La variable <strong>result</strong> debe asignarse dentro del contexto del Callout para definir el mensaje o el resultado que se devolverá después de ejecutar la lógica del Callout. Esta variable se utiliza para indicar mensajes de error, advertencias o información que debe mostrarse al usuario.</p><p>La línea <code>result = &quot;&quot;;</code> en el script:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World ADempiere&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Está asignando un valor vacío a <strong>result</strong>. Esto significa que no se está devolviendo ningún mensaje de error o advertencia al usuario. Si necesitas devolver un mensaje específico, deberías asignarlo a result como se muestra:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>result <span class="token operator">=</span> <span class="token string">&quot;Mensaje personalizado para el usuario&quot;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Al activarse el Callout muestra el mensaje:</p><p><img src="/assets/img/community/developers-guide/Message.png" alt="Mensaje al Usuario"></p><h2 id="ejemplo" tabindex="-1"><a class="header-anchor" href="#ejemplo" aria-hidden="true">#</a> Ejemplo</h2><ul><li>Al seleccionar un <strong>Producto</strong> en la ventana <strong>Activo Fijo</strong>, el contenido del campo <strong>Código</strong> de la ventana <strong>Producto</strong> debe ser copiado automáticamente en el campo <strong>Código</strong> de la ventana <strong>Activo Fijo</strong>.</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>compiere<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">DB</span></span><span class="token punctuation">;</span>\n<span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>\n<span class="token class-name">String</span> productType<span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">A_Tab</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">&quot;M_Product_ID&quot;</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">int</span> productId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">A_Tab</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">&quot;M_Product_ID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT Value FROM M_Product WHERE M_Product_ID = ?&quot;</span><span class="token punctuation">;</span>\n    value <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">.</span><span class="token function">getSQLValueString</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> sql<span class="token punctuation">,</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token class-name">A_Tab</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;Value&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nresult <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><video width="640" height="360" controls><source src="/assets/img/community/developers-guide/CalloutInProduct.mp4" type="video/mp4"></video><h2 id="vea-tambien" tabindex="-1"><a class="header-anchor" href="#vea-tambien" aria-hidden="true">#</a> Vea también</h2>',13),C=(0,s.QD)("li",null,[(0,s.QD)("a",{href:"a"},"Script ModelValidatorLogin")],-1),j=(0,s.QD)("li",null,[(0,s.QD)("a",{href:"script-modelvalidator"},"Script ModelValidator")],-1),q=(0,s.QD)("li",null,[(0,s.QD)("a",{href:"a"},"Rule Engine Implementation")],-1),D={href:"http://scripting.dev.java.net/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://wiki.adempiere.net/ZH/Case-Study-01-Journal-31",target:"_blank",rel:"noopener noreferrer"},A={},x=(0,n(42272).c)(A,[["render",function(e,a){const n=(0,s.E1)("ExternalLinkIcon"),A=(0,s.E1)("RouterLink");return(0,s.Wz)(),(0,s.An)("div",null,[t,(0,s.QD)("p",null,[(0,s.mY)("Ahora, ADempiere ha subido los JARs para trabajar con "),(0,s.QD)("a",l,[(0,s.mY)("Groovy"),(0,s.K2)(n)]),(0,s.mY)(", "),(0,s.QD)("a",o,[(0,s.mY)("Jython"),(0,s.K2)(n)]),(0,s.mY)(" y "),(0,s.QD)("a",i,[(0,s.mY)("Beanshell"),(0,s.K2)(n)]),(0,s.mY)(".")]),r,(0,s.QD)("div",p,[c,(0,s.QD)("p",null,[(0,s.mY)("Para llamar el "),u,(0,s.mY)(" se debe seguir la estructura antes explicada en "),(0,s.QD)("a",d,[(0,s.mY)("Lenguajes de Scripting y Sintaxis"),(0,s.K2)(n)])])]),m,g,v,k,(0,s.QD)("ul",null,[(0,s.QD)("li",null,[(0,s.mY)("Este "),b,(0,s.mY)(" también puede ser llamado desde la ventana de "),(0,s.K2)(A,{to:"/es/community/wiki/developers-guide/script-process.html"},{default:(0,s.Ql)((()=>[(0,s.mY)("Informe y Procesos")])),_:1}),(0,s.mY)(". Solo recuerda establecer en la ventana de "),h,(0,s.mY)(" desde qué "),y,(0,s.mY)(" estás llamando a este Script de Regla.")])]),f,(0,s.QD)("ul",null,[(0,s.QD)("li",null,[(0,s.K2)(A,{to:"/es/community/wiki/developers-guide/script-process.html"},{default:(0,s.Ql)((()=>[(0,s.mY)("Script Process")])),_:1})]),C,j,q,(0,s.QD)("li",null,[(0,s.QD)("a",D,[(0,s.mY)("Java Scripting"),(0,s.K2)(n)])]),(0,s.QD)("li",null,[(0,s.K2)(A,{to:"/es/community/wiki/developers-guide/callout.html"},{default:(0,s.Ql)((()=>[(0,s.mY)("Callout")])),_:1})]),(0,s.QD)("li",null,[(0,s.QD)("a",S,[(0,s.mY)("Rule Engine / Script Callout / Script Process"),(0,s.K2)(n)]),(0,s.mY)(" - Chinese")])])])}]])},60192:(e,a,n)=>{n.r(a),n.d(a,{data:()=>s});const s=JSON.parse('{"key":"v-5792e9a5","path":"/es/community/wiki/developers-guide/script-callout.html","title":"Script Callout","lang":"es-ES","frontmatter":{"title":"Script Callout","category":"Comunidad","star":9,"sticky":9,"tag":["Wiki"],"article":false,"author":"Jesús Albujas","description":"Un Script Callout (también conocido como Callout) es un mecanismo que permite a los desarrolladores y usuarios avanzados personalizar y extender la funcionalidad del sistema. Un Script Callout es un fragmento de código que se ejecuta en respuesta a un evento específico en ADempiere, como por ejemplo:","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://github.com/adempiere/adempiere-site.github.io/community/wiki/developers-guide/script-callout.html"}],["meta",{"property":"og:url","content":"https://github.com/adempiere/adempiere-site.github.io/es/community/wiki/developers-guide/script-callout.html"}],["meta",{"property":"og:title","content":"Script Callout"}],["meta",{"property":"og:description","content":"Un Script Callout (también conocido como Callout) es un mecanismo que permite a los desarrolladores y usuarios avanzados personalizar y extender la funcionalidad del sistema. Un Script Callout es un fragmento de código que se ejecuta en respuesta a un evento específico en ADempiere, como por ejemplo:"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"es-ES"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-08-13T16:43:15.000Z"}],["meta",{"property":"article:author","content":"Jesús Albujas"}],["meta",{"property":"article:tag","content":"Wiki"}],["meta",{"property":"article:modified_time","content":"2024-08-13T16:43:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"Script Callout\\",\\"description\\":\\"Un Script Callout (también conocido como Callout) es un mecanismo que permite a los desarrolladores y usuarios avanzados personalizar y extender la funcionalidad del sistema. Un Script Callout es un fragmento de código que se ejecuta en respuesta a un evento específico en ADempiere, como por ejemplo:\\"}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://github.com/adempiere/adempiere-site.github.io/es/atom.xml","title":" Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://github.com/adempiere/adempiere-site.github.io/es/feed.json","title":" JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://github.com/adempiere/adempiere-site.github.io/es/rss.xml","title":" RSS Feed"}]]},"headers":[{"level":2,"title":"Variables y Párametros","slug":"variables-y-parametros","link":"#variables-y-parametros","children":[]},{"level":2,"title":"Lenguajes de Scripting y Sintaxis","slug":"lenguajes-de-scripting-y-sintaxis","link":"#lenguajes-de-scripting-y-sintaxis","children":[]},{"level":2,"title":"Crear Regla","slug":"crear-regla","link":"#crear-regla","children":[]},{"level":2,"title":"Configurar Callout desde Tabla y Columna","slug":"configurar-callout-desde-tabla-y-columna","link":"#configurar-callout-desde-tabla-y-columna","children":[]},{"level":2,"title":"Variable Result","slug":"variable-result","link":"#variable-result","children":[]},{"level":2,"title":"Ejemplo","slug":"ejemplo","link":"#ejemplo","children":[]},{"level":2,"title":"Vea también","slug":"vea-tambien","link":"#vea-tambien","children":[]}],"git":{"createdTime":1723567395000,"updatedTime":1723567395000,"contributors":[{"name":"Jesús Albujas","email":"134967453+jesusalbujas@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":2.41,"words":724},"filePathRelative":"es/community/wiki/developers-guide/script-callout.md","localizedDate":"13 de agosto de 2024","excerpt":"<p>Un Script Callout (también conocido como Callout) es un mecanismo que permite a los desarrolladores y usuarios avanzados personalizar y extender la funcionalidad del sistema.</p>\\n<p>Un Script Callout es un fragmento de código que se ejecuta en respuesta a un evento específico en ADempiere, como por ejemplo:</p>","autoDesc":true}')}}]);